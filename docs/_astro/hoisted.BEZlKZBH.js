function n(a,t){const e=document.createElement(a);return t&&typeof t=="string"&&t!==""&&(e.textContent=t),t&&typeof t=="object"&&Object.keys(t).forEach(i=>{e.setAttribute(i,t[i])}),e}function d(a,t,e){a.addEventListener(t,e)}function b(a){const t=a.match(/\w+$/)?.[0]??"";return t===""||t.length>1?"":t.toUpperCase()}const C=["Control","Shift","Alt","Meta"],w=["Control+T","Control+Shift+T","Control+W","Control+Shift+W","Control+N","Control+Shift+N","Control+Tab","Control+Shift+Tab","Meta+T","Meta+Shift+T","Meta+W","Meta+Shift+W","Meta+N","Meta+Shift+N","Meta+Tab","Meta+Shift+Tab"];function E(a){const t=a.match(/\w+/g)??[];if(t.length===0)return!1;const e=t.map(i=>i.toUpperCase()==="CTRL"?"Control":i.toUpperCase()==="CMD"?"Meta":i[0].toUpperCase()+i.slice(1).toLowerCase()).join("+");return!w.includes(e)&&e.split("+").slice(0,-1).every(i=>C.includes(i))}class A{instance;#o=null;#t=null;#e=[];currentIndex=0;#i="Escape";#a;#n="K";#s="Search command";#r="black";#d=new MutationObserver(this.#m.bind(this));constructor({closeKey:t,placeholder:e,activationLetter:i}={}){if(document.getElementById("hotkeypad")==null)throw new Error("HotKeyPad instance not found in the DOM");return this.instance=document.getElementById("hotkeypad"),this.#a=navigator.userAgent.includes("Macintosh")?"Cmd":"Ctrl",t&&t!==""&&(this.#i=t),e&&e!==""&&(this.#s=e),i&&i!==""&&(this.#n=i),this.#p(),this.#u(),this}#u(){d(document,"keydown",t=>{const e=`Key${this.#n.toUpperCase()}`;t.code===e&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.#k?this.close():this.open()),t.key.toLowerCase()===this.#i.toLowerCase()&&this.close()}),this.#d.observe(this.instance,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1}),this.#C(),this.#w(),this.#E(),this.#A()}#p(){this.instance.hasAttribute("data-placeholder")&&this.instance.getAttribute("data-placeholder")!==""&&(this.#s=this.instance.getAttribute("data-placeholder")),this.instance.hasAttribute("data-activation-letter")&&this.instance.getAttribute("data-activation-letter")!==""&&(this.#n=this.instance.getAttribute("data-activation-letter").toUpperCase()),this.instance.hasAttribute("data-close-key")&&this.instance.getAttribute("data-close-key")!==""&&(this.#i=this.instance.getAttribute("data-close-key").toUpperCase())}#m(t){const{attributeName:e,target:i}=t[0];e==="class"&&(i.classList.contains("dark")?this.#r="white":this.#r="black",this.#c())}#y(){d(this.instance,"keydown",t=>{(t.metaKey||t.ctrlKey)&&this.#e.find(({hotkey:e,handler:i})=>{const s=`Key${b(e)}`;return t.code===s&&(t.preventDefault(),i!=null&&setTimeout(()=>i(),200),this.close()),!1})}),d(this.#t,"click",t=>{const e=t.target;e.tagName==="LI"&&this.#l(e),e.parentElement?.tagName==="LI"&&this.#l(e.parentElement)}),d(this.#t,"mouseover",t=>{const e=t.target;e.tagName==="LI"&&(this.#h.forEach(i=>i.removeAttribute("data-active")),e.setAttribute("data-active",""))}),d(this.#t,"keydown",t=>{const e=this.#h;this.currentIndex=Array.from(e).findIndex(o=>o.hasAttribute("data-active")),this.currentIndex=this.currentIndex===-1?0:this.currentIndex;let i=0;t.key==="Enter"&&(t.preventDefault(),this.#l(e[this.currentIndex]),e[this.currentIndex].removeAttribute("data-active"),this.currentIndex=0),t.key==="ArrowUp"&&(t.preventDefault(),i=this.currentIndex-1<0?e.length-1:this.currentIndex-1),t.key==="ArrowDown"&&(t.preventDefault(),i=this.currentIndex+1>e.length-1?0:this.currentIndex+1),t.key==="Tab"&&(t.preventDefault(),i=this.currentIndex+1>e.length-1?0:this.currentIndex+1),e[this.currentIndex].removeAttribute("data-active"),e[i].setAttribute("data-active","")}),d(this.#t,"input",t=>{const i=t.target.value.toLowerCase();this.#t.querySelectorAll("[data-section]").forEach(s=>{const r=s.querySelector("ul");r.querySelectorAll("li").forEach(c=>{c.querySelector("p").innerText.toLowerCase().includes(i)?c.style.display="flex":c.style.display="none"}),r.querySelectorAll("li[style='display: flex;']").length===0?s.style.display="none":s.style.display="block"})})}#l(t){this.#e.find(({hotkey:e,handler:i})=>(t.getAttribute("data-hotkey")===e&&(i!=null&&setTimeout(()=>i(),200),this.close()),!1))}#f(t){if(t.length===0)throw new Error("The commands array cannot be empty");return t.forEach(e=>{if(e.id===""||e.title===""||e.hotkey===""||e.handler==null)throw new Error("The command object is not valid. It should contain an id, title, hotkey and handler");if(!E(e.hotkey))throw new Error("The hotkey is not valid. It should only contain CTRL, CMD, ALT, SHIFT and a letter. Also it cannot contain browser or system reserved hotkeys such as CTRL+T, CTRL+N, CTRL+W, etc.");if(e.icon!=null&&typeof e.icon!="string")throw new Error("The icon should be a string");if((e.hotkey.match(/\w+/g)??[]).length>2)throw new Error("The hotkey only supports 2 keys maximum")}),t}open(){window.dispatchEvent(new CustomEvent("hotkeypad:open")),this.instance.style.opacity="1",this.instance.style.visibility="visible",this.instance.style.pointerEvents="auto",setTimeout(()=>this.#t.querySelector("input").focus(),200)}close(){window.dispatchEvent(new CustomEvent("hotkeypad:close")),this.instance.style.opacity="0",this.instance.style.visibility="hidden",this.instance.style.pointerEvents="none",this.#t.querySelector("input").value="",this.#t.removeEventListener("keydown",()=>{}),this.#t.removeEventListener("mouseover",()=>{}),this.#t.removeEventListener("input",()=>{})}setCommands(t){this.#e=this.#f(t),this.#c(),this.#y()}get#k(){return this.instance.style.visibility==="visible"}get activationKey(){return this.#a}get#g(){const t=new Map;return this.#e.forEach(e=>{const i=typeof e.section!="string"||e.section===""?"Unlisted":e.section,{section:o,...s}=e,r=t.get(i);r?r.push(s):t.set(i,[s])}),Array.from(t)}get#h(){return this.#t.querySelectorAll("li")}#v(t){return`https://cdn.simpleicons.org/${t}/${this.#r}`}#b(t){return/<svg/.test(t)||/<img/.test(t)||/<i/.test(t)||t===""}#C(){this.#o=n("div",{"data-backdrop":"","aria-hidden":"true"}),d(this.#o,"click",()=>this.close()),this.instance.appendChild(this.#o)}#w(){this.#t=n("div",{"data-container":""}),this.instance.appendChild(this.#t)}#E(){const t=n("header"),e=n("input",{type:"text",placeholder:this.#s,"aria-label":this.#s,autocomplete:"off",spellcheck:"false"});t.appendChild(e),this.#t.appendChild(t)}#A(){const t=n("footer"),e=n("kbd","↩"),i=n("kbd","↑"),o=n("kbd","↓"),s=n("kbd",this.#i),r=n("kbd",`${this.#a} + ${this.#n}`),h=n("p"," to select"),u=n("p"," to navigate"),c=n("p"," to close");h.prepend(e),u.prepend(i,o),c.prepend(r,s),t.append(h,u,c),this.#t.appendChild(t)}#x(){const t=n("div");t.setAttribute("data-sections",""),this.#g.forEach(([e,i])=>{const o=n("div");if(o.setAttribute("data-section",e.toLowerCase()),e!=="Unlisted"){const r=n("h4",e);o.appendChild(r)}const s=n("ul");i.forEach(({title:r,icon:h,hotkey:u})=>{const c=u.split("+").map(m=>m.trim());h==null&&(h="");const y=this.#b(h)?h:`<img src="${this.#v(h)}" alt="${r}" />`,p=n("li");if(p.setAttribute("data-hotkey",u),p.setAttribute("tabindex","0"),y!==""){const m=n("span");m.innerHTML=y,p.appendChild(m)}const k=n("p");k.append(r);const g=n("div");c.forEach(m=>{const v=n("span",m);g.appendChild(v)}),p.appendChild(k),p.appendChild(g),s.appendChild(p)}),o.appendChild(s),t.appendChild(o)}),this.#t.insertBefore(t,this.#t.lastChild)}#c(){const t=this.#t.querySelector("[data-sections]");t&&t.remove(),this.#x(),this.#h[0].setAttribute("data-active","")}}const f=new A,x=f.instance.getAttribute("data-info")??"[]",I=JSON.parse(x),L=I.map(({url:a,hotkey:t,icon:e,id:i,section:o,title:s})=>({id:i,title:s,icon:e,hotkey:t,section:o,handler:()=>{window.open(a,"_blank")}})),M=f.instance.getAttribute("data-translations")??"[]",l=JSON.parse(M),T=document.documentElement.lang;f.setCommands([{id:"print",title:l["keyboardmanager.print"],icon:`<svg style="margin-right: 8px" width="16" height="16" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z" />
</svg>`,hotkey:"ctrl+P",section:l["keyboardmanager.actions"],handler:()=>{window.print()}},{id:"print",title:l["keyboardmanager.switch-language"],icon:`<svg
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"
        ></path>
      </svg>`,hotkey:"ctrl+I",section:l["keyboardmanager.actions"],handler:()=>location.href=T==="es"?"/minimalist-portfolio-json.github.io/en":"/minimalist-portfolio-json.github.io/es"},{id:"lightmode",title:l["keyboardmanager.lightmode"],icon:`<svg
        style="margin-right: 8px"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-sun"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path><path
          d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"
        ></path></svg
      >`,hotkey:"ctrl+C",section:l["keyboardmanager.theme"],handler:()=>document.documentElement.setAttribute("data-theme","light")},{id:"darkmode",title:l["keyboardmanager.darkmode"],icon:`<svg
        style="margin-right: 8px"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"
        ></path></svg
      >
      `,hotkey:"ctrl+V",section:l["keyboardmanager.theme"],handler:()=>document.documentElement.setAttribute("data-theme","dark")},{id:"systemmode",title:l["keyboardmanager.systemmode"],icon:`<svg
        style="margin-right: 8px"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z"
        ></path><path d="M7 20h10"></path><path d="M9 16v4"></path><path d="M15 16v4"
        ></path></svg
      >`,hotkey:"ctrl+B",section:l["keyboardmanager.theme"],handler:()=>document.documentElement.setAttribute("data-theme","system")},...L]);const S=document.getElementById("footer-button");S?.addEventListener("click",()=>{var a=new KeyboardEvent("keydown",{key:"K",code:"KeyK",keyCode:75,which:75,ctrlKey:!0,altKey:!1,shiftKey:!1,metaKey:!1});document.dispatchEvent(a)});
